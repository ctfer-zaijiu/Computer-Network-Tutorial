# Email的结构、Email系统的结构

# 一、Email的结构

【内容】

一封标准的电子邮件通常由以下几个主要组成部分构成：

目的地相关（必选其中一对from/to）：

1. **收件人地址（To）：** 这是电子邮件发送给的主要接收者的电子邮件地址。你可以在这个字段中指定一个或多个收件人。
2. **抄送地址（CC - Carbon Copy）：** 这是一个可选字段，用于指定其他人应该收到副本的电子邮件。接收者可以看到谁被抄送，但主要的沟通对象是收件人。
3. **密送地址（BCC - Blind Carbon Copy）：** 也是一个可选字段，与抄送类似，但是被密送的人在电子邮件中是不可见的。这是为了保护被密送人的隐私。
4. **寄件人地址（From）：** 这是电子邮件的发件人地址。通常，电子邮件客户端会自动设置为你的电子邮件账户地址。

内容相关（都是必选项）：

1. **主题（Subject）：** 这是电子邮件的简要概述或标题。它通常用于让收件人在快速浏览邮件列表时了解电子邮件的主要内容。
2. **日期和时间戳（Date）：** 这显示了电子邮件的发送日期和时间。这是有助于确定邮件的时间顺序的信息。
3. **电子邮件正文（Body）：** 这是电子邮件的实际内容。正文可以包含文本、图像、链接等。通常，电子邮件正文采用HTML格式，允许更丰富的内容和格式。
4. **附件（Attachments）：** 这是电子邮件附带的文件，如文档、照片、音频文件等。附件使得可以在邮件中传递和分享文件。

其他（可选项和透明项）：

1. **签名（Signature）：** 一些电子邮件客户端允许用户设置签名，这是在每个发出的电子邮件末尾自动添加的一段文本。签名通常包含发件人的联系信息等。
2. **邮件头（Header）：** 这包含了一系列的信息，比如邮件的路由信息、邮件客户端的类型等。大多数用户在发送和接收邮件时都不需要直接处理邮件头。

# 二、邮件系统

【定义】

邮件系统需要有一个主服务器（也叫SMTP服务器），主服务器有很多个进程，每个进程对应一个用户，每个用户的邮件地址格式通常为：`用户名@主服务器域名`

- 当主服务器的一个用户向另一个用户进行通信时，将被实现为进程间通信
- 当主服务器的一个用户与另一个邮件系统的用户进行通信时，两个邮件系统的主服务器在收到邮件时会进行邮件地址的验证和邮件转发操作

【邮件的传递过程】

![Untitled](Email%E7%9A%84%E7%BB%93%E6%9E%84%E3%80%81Email%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%93%E6%9E%84%208fec8787019c4820a917601bffedeff8/Untitled.png)

首先，寄件人和收件人在本地需要各自安装一个电子邮件代理，该代理用于与电子邮件服务器进行访问。这里假设两个不同的邮件系统的A和B要交流一封邮件：

1、寄件人A从代理将邮件上传到A的SMTP服务器，通过SMTP协议，该过程中可能需要验证A的身份

2、A的SMTP服务器将邮件传给B的SMTP服务器，通过SMTP协议

3、B的SMTP服务器将B的邮件存储到其数据库里B对应的部分中，并通知B读邮件

4、收件人B用代理从B的SMTP服务器中下载并查看该邮件，通过POP3或IMAP协议